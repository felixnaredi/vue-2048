(function(e){function t(t){for(var r,c,a=t[0],i=t[1],l=t[2],s=0,v=[];s<a.length;s++)c=a[s],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&v.push(o[c][0]),o[c]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);f&&f(t);while(v.length)v.shift()();return u.push.apply(u,l||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==o[i]&&(r=!1)}r&&(u.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},o={app:0},u=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/vue-2048/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],i=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var f=i;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"4ab7":function(e,t,n){"use strict";n("e7f9")},"56d7":function(e,t,n){"use strict";n.r(t);var r=n("1da1"),o=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("96cf"),n("d81d"),n("a630"),n("3ca3"),n("d3b7"),n("ddb0"),n("0481"),n("4069"),n("4de4"),n("7db0"),n("159b"),n("cb29"),n("7a23")),u=Object(o["d"])("header",null,[Object(o["d"])("h1",null,"2048")],-1),c=Object(o["d"])("p",null,"Click on the table and then use the arrow keys to move the cells.",-1),a={id:"score-board-container"};function i(e,t,n,r,i,l){var f=Object(o["k"])("score-board");return Object(o["h"])(),Object(o["c"])("div",null,[u,Object(o["d"])("main",null,[Object(o["d"])("table",{tabindex:"-1",onKeydown:[t[0]||(t[0]=Object(o["n"])((function(){return l.moveLeft&&l.moveLeft.apply(l,arguments)}),["left"])),t[1]||(t[1]=Object(o["n"])((function(){return l.moveRight&&l.moveRight.apply(l,arguments)}),["right"])),t[2]||(t[2]=Object(o["n"])((function(){return l.moveDown&&l.moveDown.apply(l,arguments)}),["down"])),t[3]||(t[3]=Object(o["n"])((function(){return l.moveUp&&l.moveUp.apply(l,arguments)}),["up"]))]},[(Object(o["h"])(!0),Object(o["c"])(o["a"],null,Object(o["j"])(Array(l.height).keys(),(function(t){return Object(o["h"])(),Object(o["c"])("tr",{key:t},[(Object(o["h"])(!0),Object(o["c"])(o["a"],null,Object(o["j"])(Array(l.width).keys(),(function(n){return Object(o["h"])(),Object(o["c"])("td",{key:n,class:Object(o["g"])(l.cellStyleForValue(e.$store.getters.getCell({y:t,x:n}).value))},Object(o["l"])(e.$store.getters.getCell({y:t,x:n}).value),3)})),128))])})),128))],32)]),c,Object(o["d"])("button",{onClick:t[4]||(t[4]=function(){return l.reset&&l.reset.apply(l,arguments)})},"Reset"),Object(o["d"])("div",a,[Object(o["e"])(f,{id:"score-board"})])])}function l(e,t,n,r,u,c){return Object(o["h"])(),Object(o["c"])("div",null,[Object(o["d"])("p",null,"Greatest: "+Object(o["l"])(c.greatest),1),Object(o["d"])("p",null,"Sum: "+Object(o["l"])(c.sum),1)])}var f={computed:{sum:function(){return this.$store.getters.nonEmptyCells.map((function(e){return e.value})).reduce((function(e,t){return e+t}))},greatest:function(){return this.$store.getters.nonEmptyCells.map((function(e){return e.value})).reduce((function(e,t){return Math.max(e,t)}))}}},s=(n("74bc"),n("6b0d")),v=n.n(s);const m=v()(f,[["render",l],["__scopeId","data-v-243c8ee1"]]);var d=m,p={name:"App",components:{ScoreBoard:d},computed:{height:function(){return this.$store.state.height},width:function(){return this.$store.state.width}},created:function(){this.reset()},methods:{reset:function(){this.$store.commit("empty"),this.$store.dispatch("step"),this.$store.dispatch("step")},move:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch(e);case 2:if(!n.sent){n.next=4;break}t.$store.dispatch("step");case 4:case"end":return n.stop()}}),n)})))()},moveLeft:function(){this.move("moveLeft")},moveRight:function(){this.move("moveRight")},moveDown:function(){this.move("moveDown")},moveUp:function(){this.move("moveUp")},cellStyleForValue:function(e){return console.log("cell-".concat(e)),"cell-".concat(e)}}};n("4ab7");const h=v()(p,[["render",i]]);var b=h,g=n("5502");function w(e){return e}function y(e){return e[Math.floor(Math.random()*e.length)]}function C(e,t){if(null==t)return C(0,e);if(e>t)return C(t+1,e+1).reverse();var n=t-e;return Array.from(Array(n).keys()).map((function(t){return t+e}))}function j(e,t){return{y:e,x:t}}function O(e,t,n,r){return{coord:j(e,t),value:n,mergedAtMoveCount:r}}function x(e){return null==e.value}var R=new g["a"].Store({state:{height:4,width:4,moveCounter:0,table:[],stepConfig:{amount:1,values:[1,2]}},getters:{getCell:function(e){return function(t){var n=t.y,r=t.x;if(n<0||r<0||n>=e.height||r>=e.width)return null;var o=e.table[n][r];return o?O(n,r,o.value,o.mergedAtMoveCount):O(n,r,null,null)}},getRow:function(e,t){return function(n){return C(e.width).map((function(e){return t.getCell(j(n,e))}))}},getColumn:function(e,t){return function(n){return C(e.height).map((function(e){return t.getCell(j(e,n))}))}},cells:function(e,t){return C(e.height).map((function(e){return t.getRow(e)})).flat()},nonEmptyCells:function(e,t){return t.cells.filter((function(e){return!x(e)}))},emptyCells:function(e,t){return t.cells.filter(x)},movedCell:function(e,t){return function(n,r,o){var u=r.find((function(e){var t=o(n),r=t.y,u=t.x,c=e.coord,a=c.y,i=c.x;return r===a&&u===i}));return null==u?r:null==u.value?(u.value=n.value,n.value=null,t.movedCell(u,r,o)):(u.value===n.value&&u.mergedAtMoveCount!==e.moveCounter&&(u.value*=2,u.mergedAtMoveCount=e.moveCounter,n.value=null),r)}},movedCellRight:function(e,t){return function(e,n){return t.movedCell(e,n,(function(e){var t=e.coord,n=t.y,r=t.x;return j(n,r+1)}))}},movedCellLeft:function(e,t){return function(e,n){return t.movedCell(e,n,(function(e){var t=e.coord,n=t.y,r=t.x;return j(n,r-1)}))}},movedCellDown:function(e,t){return function(e,n){return t.movedCell(e,n,(function(e){var t=e.coord,n=t.y,r=t.x;return j(n+1,r)}))}},movedCellUp:function(e,t){return function(e,n){return t.movedCell(e,n,(function(e){var t=e.coord,n=t.y,r=t.x;return j(n-1,r)}))}},movedRowRight:function(e,t){return function(n){var r=t.getRow(n);return C(e.width-1,-1).forEach((function(e){r=t.movedCellRight(r[e],r)})),r}},movedRowLeft:function(e,t){return function(n){var r=t.getRow(n);return C(e.width).forEach((function(e){r=t.movedCellLeft(r[e],r)})),r}},movedColumnDown:function(e,t){return function(n){var r=t.getColumn(n);return C(e.height-1,-1).forEach((function(e){r=t.movedCellDown(r[e],r)})),r}},movedColumnUp:function(e,t){return function(n){var r=t.getColumn(n);return C(e.height).forEach((function(e){r=t.movedCellUp(r[e],r)})),r}},containsEqualCell:function(e,t){return function(e){var n=e.coord,r=n.y,o=n.x,u=e.value,c=t.getCell(j(r,o)),a=c.value;return u===a}}},mutations:{empty:function(e){e.table=[],C(e.height).forEach((function(){return e.table.push(Array(e.width).fill(null))}))},setCell:function(e,t){var n=e.table,r=t.coord,o=r.y,u=r.x,c=t.value,a=t.mergedAtMoveCount;n[o][u]={value:c,mergedAtMoveCount:a}},incrementMoveCounter:function(e){e.moveCounter+=1}},actions:{step:function(e){var t=e.state,n=e.getters,r=e.commit,o=t.stepConfig,u=o.amount,c=o.values;C(u).forEach((function(){var e=y(n.emptyCells);if(e){var t=e.coord,o=t.y,u=t.x;r("setCell",O(o,u,y(c),null))}}))},insertCell:function(e,t){return Object(r["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.getters,o=e.commit,!r.containsEqualCell(t)){n.next=3;break}return n.abrupt("return",!1);case 3:return o("setCell",t),n.abrupt("return",!0);case 5:case"end":return n.stop()}}),n)})))()},updateMove:function(e,t){return Object(r["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,o=e.dispatch,n.next=3,Promise.all(t.map((function(e){return o("insertCell",e)}))).then((function(e){return e.some(w)}));case 3:if(!n.sent){n.next=6;break}return r("incrementMoveCounter"),n.abrupt("return",!0);case 6:return n.abrupt("return",!1);case 7:case"end":return n.stop()}}),n)})))()},moveRight:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,r=e.getters,o=e.dispatch,t.abrupt("return",o("updateMove",C(n.height).map(r.movedRowRight).flat()));case 2:case"end":return t.stop()}}),t)})))()},moveLeft:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,r=e.getters,o=e.dispatch,t.abrupt("return",o("updateMove",C(n.height).map(r.movedRowLeft).flat()));case 2:case"end":return t.stop()}}),t)})))()},moveDown:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,r=e.getters,o=e.dispatch,t.abrupt("return",o("updateMove",C(n.width).map(r.movedColumnDown).flat()));case 2:case"end":return t.stop()}}),t)})))()},moveUp:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,r=e.getters,o=e.dispatch,t.abrupt("return",o("updateMove",C(n.width).map(r.movedColumnUp).flat()));case 2:case"end":return t.stop()}}),t)})))()}}});Object(o["b"])(b).use(R).mount("#app")},"74bc":function(e,t,n){"use strict";n("b8ae")},b8ae:function(e,t,n){},e7f9:function(e,t,n){}});
//# sourceMappingURL=app.8a1e608b.js.map